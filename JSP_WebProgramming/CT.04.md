# JSP 필수 이해 요소

<br>

## JSP 처리과정
- JSP에 해당하는 서블릿이 존재하지 않을 경우
  - JSP 페이지로부터 자바 코드를 생성
  - 자바 코드를 컴파일해서 서블릿 클래스 생성
  - 서블릿에 클라이언트 요청 전달
  - 서블릿이 요청을 처리한 결과를 응답으로 생성
  - 응답을 웹 브라우저에 전송

- JSP에 해당하는 서블릿이 존재하는 경우
  - 서블릿에 클라이언트 요청 전달
  - 서블릿이 요청을 처리한 결과를 응답으로 생성
  - 응답을 웹 브라우저에 전송

<br>

**즉 JSP 페이지를 요청할 때 JSP를 직접 실행하는 것이 아니라 JSP를 자바 소스코드로 변환 후 컴파일해서 생성한 서블릿을 실행하는 것**

<br>

- JSP 페이지를 자바 코드로 변경하는 단계 : `변환`
- 자바 코드를 서블릿 클래스로 변경하는 단계 : `컴파일`

<br>

> JSP를 실행한다 : JSP 페이지를 컴파일한 결과인 서블릿 클래스를 실행한다

<br>

## 출력 버퍼와 응답
JSP 페이지는 응답 결과를 웹 브라우저에 곧바로 전송하지 않는다
<br>

대신 출력 버퍼라고 불리는 곳에 임시로 응답 결과를 저장했다가 한 번에 웹 브라우저에 전송한다
- 기본적으로 버퍼의 크기가 다 차면 자동으로 데이터를 전송한다

<br>

### 출력 버퍼에 저장 후 웹 브라우저로 전송시 장점
- 데이터 전송 성능 향상
- JSP 실행 도중에 버퍼를 비우고 새로운 내용 전송 가능
- 버퍼가 다 차기 전까지 헤더 변경 가능
- 첫 버퍼의 내용을 웹 브라우저에 전송하기 전까지 헤더 정보를 얼마든지 변경 가능

> JSP 실행 과정에서 에러가 발생하면, 지금까지 생성한 내용을 버퍼에서 지우고 에러 화면을 출력 가능

<br>

### 버퍼 설정하기
page 디렉티브는 `buffer` 속성을 제공한다
```
<%@ page buffer = "4kb" %> // 4kb 크기의 버퍼 설정
<%@ page buffer = "none" %> // 버퍼 설정X
```

<br>

#### 버퍼 설정을 하지 않으면
- <jsp:forward> 기능 사용X
- 곧바로 전송되기 때문에 출력한 내용을 취소할 수 없다

<br>

### flsuh
버퍼가 다 찼을 때, 버퍼에 쌓인 데이터를 전송하고 버퍼를 비우는 것을 플러시라고 한다
<br>

page 디렉티브는 `autoFlush` 속성을 제공한다
- true : 버퍼가 다 차면 버퍼를 플러시하고 계속해서 작업을 진행
- false : 버퍼가 다 차면 Exception을 발생시키고 작업 중지

<br>

## 웹 어플리케이션 배포
웹 어플리케이션을 WAS에 배포하는 방법은 두 가지 있다
- 대상 폴더에 파일을 직접 복사
- war 파일로 묶어서 배포

<br>

### 배포 예시
```
C:..>jar cvf jspFile.war *
```

<br>



