# 자바와 절차적 / 구조적 프로그래밍
<br>

## 자바 프로그램의 개발과 구동
### 현실 세계와 자바의 가상 세계
| 현실 세계 | 가상 세계 |
|-- | -- |
| 소프트웨어 개발 도구 | JDK - 자바 개발 도구 |
| 운영체제 | JRE - 자바 실행 환경 |
| 하드웨어 | JVM - 자바 가상 기계 |
<br>

### Write Once Run Away
- 프로그램을 한번 작성해서 실행하고 나면 언제 어디서든 시스템 상관 없이 사용 가능한 것

> [WORA의 자세한 내용](https://github.com/juni998/TIL/blob/main/java/WORA.md)

<br>

## main() / 메소드 스택 프레임
### T 메모리 구조
- 스태틱 영역 : 클래스
- 스택 영역 : 메소드
- 힙 영역 : 객체

### main() 메소드 실행시 메모리의 변화
예제
```java
public class Start {
  public static void main(String[] args) {
    System.out.println("Hello OOP!!");
  }
}
```
<br>

#### main() 메소드가 실행되기 전 JVM에서 수행하는 전처리 작업
- java.lang 패키지를 T 메모리의 스태틱 영역에 배치
- import된 패키지를 T 메모리의 스테틱 영역에 배치
- 프로그램 상의 모든 클래스를 T 메모리의 스태틱 영역에 배치
<br>

#### main() 메소드가 실행되기 전 스택에서 처리되는 작업
- main() 메소드 실행 전 스택 프레임이 스택에 할당된다
  - 여는 중괄호를 만날 때마다 스택 프레임이 하나씩 생긴다 (클래스 정의를 시작하는 여는 중괄호 제외)
- 메소드의 인자인 args를 저장할 변수 공간을 스택 프레임 맨 밑에 확보한다
- 그 이후 main() 메소드 안의 첫 명령문을 실행 된다
- 그리고 닫는 중괄호를 만나면 스택 프레임이 소멸 되는데 마지막 닫는 중괄호로 모든 스택 프레임은 소멸된다
<br>

#### main() 메소드가 끝나고 나서의 작업
- JRE는 JVM을 종료하고 JRE 자체도 운영체제 상의 메모리에서 사라진다
<br>

#### 정리
1. JRE는 먼저 프로그램 안에 main() 메소드가 있는지 확인.
2. main() 메소드를 찾았다면 JVM을 부팅
3. JVM은 가장 먼저 `java.lang`패키지를 스태틱 메모리에 넣어둠
4. 그 이후 프로그램에 작성된 `import된 패키지와 모든 클래스`를 스태틱 영역에 가져다 둠
5. 스택 영역으로 넘어가 스택 프레임이 스택에 할당된다. 스택 프레임은 여는 중괄호를 만날 때마다 하나씩 생성된다
6. 스택 프레임 맨 밑에 메소드 인자들의 변수 공간을 확보한다
7. main() 메소드가 실행된다
8. main() 메소드의 마지막 중괄호를 만났을 때 스택 프레임이 모두 소멸된다
9. JRE는 JVM을 종료하고 JRE 또한 운영체제 상의 메모리에서 사라진다

