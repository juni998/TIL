# 교착상태와 기아상태
> 교착상태와 기아상태에 대한 내용에 대해 알아봅시다
<br>

## 교착상태(DeadLock)와 기아상태(Starvation)
### 교착상태(DeadLock)이란
결코 일어나지 않을 사건(이벤트)에 대해서 프로세스가 기다리고 있는 것을 말한다

<br>

### 기아상태(Starvation)이란
무기한 연기로 인해 아무리 기다려도 자신의 차례가 돌아오지 않는 것을 말한다

<br>

- 다중 프로그래밍 시스템에서 프로세스들이 한정된 시스템 자원 차지를 위해 경쟁할 때 발생할 수 있다
- 교착 상태, 기아 상태는 프로세스가 작업을 수행하지 못하고 무한히 대기한다는 공통점이 있다 하지만, 서로 작업을 수행하지 못하는 원인이 다르다

<br>

### 교착 상태가 시스템에 미치는 영향
자원 요구가 뒤엉켜 교착 상태에 빠진 프로세스들은 반납되지 않을 자원을 무한정 기다리게 된다
<br>

이 경우, 작업 진행이 더이상 불가하므로 운영체제가 교착 상태를 해결해야 한다
<br>

만일 운영체제가 교착 상태를 해결하지 못하면, 사용자가 직접 프로그램을 종료하는 방법 등으로 해결해야 한다
- 프로그램을 강제로 종료하여 교착 상태를 해결할 경우, 데이터 손실 위험이 있다

<br>

## 교착상태 발생 조건
교착상태가 발생하려면 다음과 같은 4가지 조건이 모두 만족해야 한다
1. 상호 배제(mutual exclusion)
  - 한 번에 한 개의 프로세스만 해당 자원 사용 가능
2. 점유와 대기(hold and wait)
  - 최소한 한 개를 차지하고, 다른 프로세스에 할당된 자원을 얻기 위해 대기
3. 비선점(non-preemption)
  - 자원이 선점될 수 없음(강탈 불가)
  - 자원을 점유하고 있는 프로세스가 자원 사용을 마쳐야 해제
4. 순환 대기(circular wait)
  - 대기 프로세스 집합이 있을 때 P0은 P1이 점유하고 있는 자원을, P1은 P2가 점유하고 있는 자원을 Pn-1은 P0이 점유하고 있는 자원을 대기한다 (점유-대기 사이클 형성)

<br>

## 교착상태 해결 방법
1. 교착상태 예방(DeadLock Prevention)
  - 교착상태가 절대 일어나지 않도록 방지한다
  - 명쾌하지만, 자원 활용도가 떨어진다

2. 교착상태 회피(DeadLock Avoidance)
  - 시스템 내 교착상태 가능성은 있으나, 교착 상태를 회피한다
  - 회피 알고리즘 실행으로 시스템 부하가 증가한다

3. 교착상태 탐지와 회복(DeadLock Detection and Recovery)
  - 교착상태 발생을 허용하되, 교착상태를 알아내고 교착상태로부터 벗어나 회복할 수 있게 한다
  - 교착상태 탐지 알고리즘 실행으로 시스템에 부하가 증가한다
  - 교착상태 회복 과정에서, 수행한 작업의 손실이 발생한다

<br>

한 가지의 방법만으로 시스템의 모든 자원 할당 문제를 해결하는 것은 불가능하다
<BR>

예방, 회피, 탐지와 회복 세 가지 방법을 결합하여 자원의 형태에 따라 최적의 접근 방법을 채택해야 한다
  
<br>
  
### 교착 상태 예방(DeadLock Prevention)
교착 상태 필요조건 네 가지 중 한 가지만 방지해도 교착 상태를 예방할 수 있다
<br>
  
교착 상태 예방법은 다음과 같다 
- **점유와 대기** 조건 방지
- **비선점** 조건 방지
- **순환 대기** 조건 방지
  여기서 상호 배제 조건 방지는 제외한다
  - 교착 상태 문제는 한 순간에 프로세스를 1개만 사용할 수 있는 자원이기 때문이다
  
